var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__vite_style__=document.createElement("style");__vite_style__.innerHTML="#vue-water-marker{padding-top:20px;padding-left:25px;position:fixed;left:0;top:0;width:100%;height:100%;overflow:hidden;display:flex;align-items:center;justify-content:space-around;flex-wrap:wrap;pointer-events:none;user-select:none;z-index:19999}#vue-water-marker .vue-water-marker-item{padding:0 20px;transform:rotate(-45deg);pointer-events:none;user-select:none}\n",document.head.appendChild(__vite_style__),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).VueWaterMarker=t(e.Vue)}(this,(function(e){"use strict";var t=e.defineComponent({name:"WaterMarker",props:{refresh:{default:5e3,type:Number}},setup(t){const r=e.ref(0),n=e.ref(!0),o=e.ref([]),l=e.ref(0),a=e.ref(0),u=e.ref({}),i=e.ref(!0);let s,p=()=>{n.value?s=setTimeout((async()=>{i.value=!1,await e.nextTick(),i.value=!0,p&&n.value&&p()}),t.refresh||5e3):clearTimeout(s)};p&&n.value&&p(),e.onBeforeUnmount((()=>{p=null,clearTimeout(s),i.value=!0}));const c=e.computed((()=>__spreadProps(__spreadValues({fontSize:"15px",color:"#adadad",opacity:.2,textAlign:"center"},u.value),{width:l.value+"px",height:a.value+"px"})));return e.watch((()=>n.value),(e=>{e?(i.value=!0,p&&p()):(clearTimeout(s),i.value=!1)})),{visible:n,content:o,styleOption:u,width:l,height:a,style:c,markerNumber:r,reset:i}}});const r=["innerHTML"];t.render=function(t,n,o,l,a,u){return t.visible&&t.reset?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(t.markerNumber,(n=>(e.openBlock(),e.createElementBlock("div",{key:n,class:"vue-water-marker-item",style:e.normalizeStyle(t.style)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.content,((t,n)=>(e.openBlock(),e.createElementBlock("p",{key:n,innerHTML:t},null,8,r)))),128))],4)))),128)):e.createCommentVNode("",!0)};return e.defineComponent({props:{visible:{default:!0,type:Boolean},content:{default:()=>[],type:Array},styleOption:{default:()=>({}),type:Object},width:{type:Number,default:220},height:{type:Number,default:220},refresh:{default:5e3,type:Number},target:{default:void 0,type:[String,Object]}},setup(r){const{visible:n,content:o,styleOption:l,refresh:a,target:u,width:i,height:s}=e.toRefs(r);let p,c,d,f=Math.ceil(screen.width/s.value)*Math.ceil(screen.height/i.value),m=document.body;"string"==typeof u.value?m=document.querySelector(u.value):"object"==typeof u.value&&(m=u.value);const v=()=>{c&&(c.visible=n.value,c.content=o.value,c.styleOption=l.value,c.width=i.value,c.height=s.value,c.markerNumber=f)},_=()=>{const r=document.createElement("div");r.id="vue-water-marker",p=e.createApp(t,{refresh:a.value}),c=p.mount(r),v(),null==m||m.appendChild(r)};document.querySelector("#vue-water-marker")||((()=>{d||(d=new MutationObserver((async function(e){for(const t of e){const e=t.removedNodes;if((null==e?void 0:e.length)>0)for(const t of Array.from(e))"vue-water-marker"===t.getAttribute("id")&&(null==p||p.unmount(),c=null,_())}})));d.observe(m,{childList:!0})})(),_()),e.watchEffect((()=>{v(),n.value?_():(()=>{var e;null==d||d.disconnect(),null==p||p.unmount(),c=null;const t=document.querySelector("#vue-water-marker");t&&(null==(e=null==t?void 0:t.parentNode)||e.removeChild(t))})()}))},render:()=>null})}));
